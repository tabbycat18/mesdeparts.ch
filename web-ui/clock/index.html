<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Horloge CFF</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background: transparent;
        overflow: hidden;
      }

      #sbb_uhr_container {
        width: 100%;
        height: 100%;
        position: relative;
        background: transparent;
      }
    </style>
    <script src="js/sbbUhr-1.3.js"></script>
  </head>
  <body>
    <div id="sbb_uhr_container" aria-hidden="true"></div>
    <script>
      (function () {
        var urlParams = new URLSearchParams(window.location.search);
        var scriptCandidates = [
          "js/sbbUhr-1.3.js",
          "/clock/js/sbbUhr-1.3.js",
        ];

        function bootClock() {
          if (typeof window.sbbUhr !== "function") {
            console.error("sbbUhr not available; clock disabled.");
            return;
          }

          var myClock = new window.sbbUhr("sbb_uhr_container", false, 60);

          if (urlParams.has("stop")) {
            myClock.stop();
          } else {
            myClock.start();
          }

          if (urlParams.has("inverted")) {
            myClock.invertColors();
          }
        }

        function loadFallbackScript() {
          if (typeof window.sbbUhr === "function") {
            bootClock();
            return;
          }

          var nextSrc = scriptCandidates.shift();
          if (!nextSrc) {
            console.error("sbbUhr script failed to load from all paths.");
            return;
          }

          var script = document.createElement("script");
          script.src = nextSrc;
          script.onload = loadFallbackScript;
          script.onerror = loadFallbackScript;
          document.head.appendChild(script);
        }

        loadFallbackScript();
      })();
    </script>
  </body>
</html>
